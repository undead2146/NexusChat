<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="NexusChat.MainPage"
             BackgroundColor="{AppThemeBinding Light={StaticResource Background}, Dark={StaticResource Background}}">

    <Grid RowDefinitions="Auto,*,Auto" Padding="0" RowSpacing="0">

        <!-- Main Content -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20" Spacing="20">
                
                <!-- Welcome Section -->
                <Frame Padding="0" HasShadow="True" CornerRadius="12" IsClippedToBounds="True">
                    <Grid RowDefinitions="Auto,*">
                        <Image Grid.RowSpan="2" Source="dotnet_bot.png" Aspect="AspectFill"
                               Opacity="0.15" HorizontalOptions="Fill" VerticalOptions="Fill" />
                        
                        <BoxView Grid.RowSpan="2" BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
                                 Opacity="0.5" />
                        
                        <VerticalStackLayout Padding="20" Spacing="15">
                            <Label Text="Welcome to NexusChat" 
                                   FontFamily="OpenSansBold" FontSize="28" TextColor="White" />
                                   
                            <Label Text="Your hub for AI-powered conversation" 
                                   FontFamily="OpenSansRegular" FontSize="16" TextColor="White" />
                                   
                            <Button x:Name="StartNewChatButton"
                                    Text="Start a New Chat" 
                                    BackgroundColor="White" 
                                    TextColor="{StaticResource Primary}"
                                    FontAttributes="Bold"
                                    CornerRadius="20" 
                                    Margin="0,10,0,0"
                                    HorizontalOptions="Start" />
                        </VerticalStackLayout>
                    </Grid>
                </Frame>

                <!-- Quick Access Tabs -->
                <Label Text="Quick Access" Style="{StaticResource HeaderLabelStyle}" Margin="0,10,0,5" />
                <Grid ColumnDefinitions="*,*,*" ColumnSpacing="15">
                    <!-- Chats Tab -->
                    <Frame x:Name="ChatsFrame" CornerRadius="8" Padding="15" HasShadow="True" Grid.Column="0">
                        <VerticalStackLayout HorizontalOptions="Center" Spacing="5">
                            <Label Text="&#xf4ad;" Style="{StaticResource AppThemeBindingFontAwesome}" 
                                   FontSize="32" HorizontalOptions="Center" />
                            <Label Text="Chats" FontFamily="OpenSansSemiBold" 
                                   HorizontalOptions="Center" FontSize="14" />
                        </VerticalStackLayout>
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer x:Name="ChatsTabTap" />
                        </Frame.GestureRecognizers>
                    </Frame>
                    
                    <!-- Models Tab -->
                    <Frame x:Name="ModelsFrame" CornerRadius="8" Padding="15" HasShadow="True" Grid.Column="1">
                        <VerticalStackLayout HorizontalOptions="Center" Spacing="5">
                            <Label Text="&#xf085;" Style="{StaticResource AppThemeBindingFontAwesome}" 
                                   FontSize="32" HorizontalOptions="Center" />
                            <Label Text="Models" FontFamily="OpenSansSemiBold" 
                                   HorizontalOptions="Center" FontSize="14" />
                        </VerticalStackLayout>
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer x:Name="ModelsTabTap" />
                        </Frame.GestureRecognizers>
                    </Frame>
                    
                    <!-- Settings Tab -->
                    <Frame x:Name="SettingsFrame" CornerRadius="8" Padding="15" HasShadow="True" Grid.Column="2">
                        <VerticalStackLayout HorizontalOptions="Center" Spacing="5">
                            <Label Text="&#xf013;" Style="{StaticResource AppThemeBindingFontAwesome}" 
                                   FontSize="32" HorizontalOptions="Center" />
                            <Label Text="Settings" FontFamily="OpenSansSemiBold" 
                                   HorizontalOptions="Center" FontSize="14" />
                        </VerticalStackLayout>
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer x:Name="SettingsTabTap" />
                        </Frame.GestureRecognizers>
                    </Frame>
                </Grid>

                <!-- Development Features -->
                <Label Text="Development Features" Style="{StaticResource HeaderLabelStyle}" Margin="0,20,0,5" />
                <Frame Padding="20" HasShadow="True">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="These features are available for testing and demonstration purposes." 
                               TextColor="{StaticResource SecondaryTextColor}" />
                        
                        <!-- Counter Button -->
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Label Grid.Column="0" Text="&#xf201;" 
                                   Style="{StaticResource AppThemeBindingFontAwesome}" 
                                   FontSize="24" VerticalOptions="Center" />
                            
                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Counter Demo" FontFamily="OpenSansSemiBold" FontSize="16" />
                                <Label Text="Simple button click counter example" 
                                       TextColor="{StaticResource SecondaryTextColor}" FontSize="12" />
                            </VerticalStackLayout>
                            
                            <Button x:Name="CounterBtn" Grid.Column="2" 
                                    Text="Play Clicker Game" 
                                    Clicked="OnCounterClicked"
                                    Style="{StaticResource OutlineButton}" />
                        </Grid>
                        
                        <BoxView HeightRequest="1" 
                                 BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}" />
                        
                        <!-- Theme Testing -->
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Label Grid.Column="0" Text="&#xf042;" 
                                   Style="{StaticResource AppThemeBindingFontAwesome}" 
                                   FontSize="24" VerticalOptions="Center" />
                            
                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Theme Testing" FontFamily="OpenSansSemiBold" FontSize="16" />
                                <Label Text="View and test different theme components" 
                                       TextColor="{StaticResource SecondaryTextColor}" FontSize="12" />
                            </VerticalStackLayout>
                            
                            <Button Grid.Column="2" 
                                    Text="Open" 
                                    Clicked="TestBtn_Clicked"
                                    Style="{StaticResource OutlineButton}" />
                        </Grid>
                        
                        <BoxView HeightRequest="1" 
                                 BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}" />
                        
                        <!-- Icon Testing -->
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Label Grid.Column="0" Text="&#xf03e;" 
                                   Style="{StaticResource AppThemeBindingFontAwesome}" 
                                   FontSize="24" VerticalOptions="Center" />
                            
                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Icon Testing" FontFamily="OpenSansSemiBold" FontSize="16" />
                                <Label Text="View available FontAwesome icons" 
                                       TextColor="{StaticResource SecondaryTextColor}" FontSize="12" />
                            </VerticalStackLayout>
                            
                            <Button Grid.Column="2" 
                                    Text="Open" 
                                    Clicked="IconTestBtn_Clicked"
                                    Style="{StaticResource OutlineButton}" />
                        </Grid>
                        
                        <BoxView HeightRequest="1" 
                                 BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}" />
                        
                        <!-- NEW: Model Test Button -->
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Label Grid.Column="0" Text="&#xf0ae;" 
                                   Style="{StaticResource AppThemeBindingFontAwesome}" 
                                   FontSize="24" VerticalOptions="Center" />
                            
                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Data Model Testing" FontFamily="OpenSansSemiBold" FontSize="16" />
                                <Label Text="Run tests for data models and validate functionality" 
                                       TextColor="{StaticResource SecondaryTextColor}" FontSize="12" />
                            </VerticalStackLayout>
                            
                            <Button Grid.Column="2" 
                                    Text="Run Tests" 
                                    Clicked="ModelTestBtn_Clicked"
                                    BackgroundColor="{AppThemeBinding Light=#3a86ff, Dark=#4895ef}"
                                    TextColor="White"
                                    FontAttributes="Bold"
                                    CornerRadius="8" />
                        </Grid>

                        <BoxView HeightRequest="1" 
                                 BackgroundColor="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray600}}" />
                        
                        <!-- Database Viewer Button -->
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="15">
                            <Label Grid.Column="0" Text="&#xf1c0;" 
                                   Style="{StaticResource AppThemeBindingFontAwesome}" 
                                   FontSize="24" VerticalOptions="Center" />
                            
                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Database Viewer" FontFamily="OpenSansSemiBold" FontSize="16" />
                                <Label Text="View and explore database tables and records" 
                                       TextColor="{StaticResource SecondaryTextColor}" FontSize="12" />
                            </VerticalStackLayout>
                            
                            <Button Grid.Column="2" 
                                    Text="Open Database" 
                                    Clicked="DbViewerBtn_Clicked"
                                    BackgroundColor="{AppThemeBinding Light=#4361ee, Dark=#4895ef}"
                                    TextColor="White"
                                    FontAttributes="Bold"
                                    CornerRadius="8" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>
                
                <!-- Version Info -->
                <Label Text="NexusChat v1.0.0-dev" 
                       HorizontalOptions="Center"
                       TextColor="{StaticResource SecondaryTextColor}" 
                       FontSize="12" Margin="0,10,0,20" />
            </VerticalStackLayout>
        </ScrollView>
        
        <!-- Footer -->
        <Grid Grid.Row="2" ColumnDefinitions="*,*,*" BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceBackground}, Dark={StaticResource CardBackground}}" 
              HeightRequest="60" Padding="0">
              
            <Frame Grid.Column="0" BorderColor="Transparent" BackgroundColor="Transparent" 
                   Padding="0" Margin="15,5" CornerRadius="10" HasShadow="False" HorizontalOptions="Center">
                <Grid WidthRequest="60">
                    <BoxView CornerRadius="10" BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}" 
                             Opacity="0.1" />
                    <Label Text="&#xf015;" Style="{StaticResource AppThemeBindingFontAwesome}" 
                           FontSize="20" TextColor="{StaticResource Primary}" 
                           VerticalOptions="Center" HorizontalOptions="Center" />
                </Grid>
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer x:Name="HomeButton" />
                </Frame.GestureRecognizers>
            </Frame>
            
            <Frame Grid.Column="1" BorderColor="Transparent" BackgroundColor="Transparent"
                   Padding="0" Margin="15,5" CornerRadius="10" HasShadow="False" HorizontalOptions="Center">
                <Grid WidthRequest="60">
                    <BoxView CornerRadius="10" BackgroundColor="{StaticResource Gray200}" 
                             Opacity="0.1" />
                    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="2">
                        <Label Text="&#xf304;" Style="{StaticResource AppThemeBindingFontAwesome}" 
                               FontSize="18" TextColor="{StaticResource SecondaryTextColor}" />
                        <Label Text="Coming Soon" FontSize="8" TextColor="{StaticResource SecondaryTextColor}"
                               HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </Grid>
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer x:Name="NewChatButton" />
                </Frame.GestureRecognizers>
            </Frame>
            
            <Frame Grid.Column="2" BorderColor="Transparent" BackgroundColor="Transparent"
                   Padding="0" Margin="15,5" CornerRadius="10" HasShadow="False" HorizontalOptions="Center">
                <Grid WidthRequest="60">
                    <BoxView CornerRadius="10" BackgroundColor="{StaticResource Gray200}" 
                             Opacity="0.1" />
                    <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center" Spacing="2">
                        <Label Text="&#xf007;" Style="{StaticResource AppThemeBindingFontAwesome}" 
                               FontSize="18" TextColor="{StaticResource SecondaryTextColor}" />
                        <Label Text="Coming Soon" FontSize="8" TextColor="{StaticResource SecondaryTextColor}"
                               HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </Grid>
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer x:Name="ProfileButton" />
                </Frame.GestureRecognizers>
            </Frame>
        </Grid>
    </Grid>
</ContentPage>
